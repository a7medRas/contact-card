<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>بطاقة تواصل – مصطفى هيثم</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
  <style>
    body{margin:0;font-family:"Cairo",sans-serif;background:#111827;color:#f9fafb;
      display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px}
    .card{background:#1f2937;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.5);
      width:360px;padding:22px;text-align:center}
    .avatar{width:120px;height:120px;border-radius:50%;overflow:hidden;
      margin:0 auto 16px;border:3px solid #374151}
    .avatar img{width:100%;height:100%;object-fit:cover}
    h1{margin:0;font-size:22px;font-weight:900}
    p{margin:6px 0 16px;color:#d1d5db;font-size:14px}
    .buttons{display:grid;gap:10px;margin:14px 0}
    .btn{display:block;padding:12px;border-radius:12px;text-decoration:none;font-weight:700;color:#fff}
    .btn.wa{background:#25D366}
    .btn.fb{background:#1877f2}
    .btn.call{background:#6366f1}
    .btn.save{background:#f59f00;color:#111}
    .qr{margin-top:16px}
    footer{margin-top:10px;font-size:12px;color:#9ca3af}
  </style>
</head>
<body>
  <div class="card">
    <div class="avatar"><img src="profile.jpg" alt="مصطفى هيثم" /></div>
    <h1>مصطفى هيثم</h1>
    <p>Hardee's Restaurant Team Member</p>
    <div class="buttons">
      <a class="btn wa" href="https://wa.me/201141561578" target="_blank">واتساب</a>
      <a class="btn fb" href="https://www.facebook.com/share/1BRXR66Zg7/" target="_blank">فيسبوك</a>
      <a class="btn call" href="tel:+201093988206">اتصال</a>
      <a class="btn save" id="saveBtn" download="mostafa_heitham.vcf">حفظ جهة الاتصال</a>
    </div>
    <div class="qr" id="qrcode"></div>
    <footer>© بطاقة تواصل – تصميم بخط Cairo</footer>
  </div>

  <!-- QRCode.js library fully embedded -->
  <script>
  /*! qrcode.js v1.0.0 | MIT | (c) davidshimjs */
  // Full minified code of qrcode.js is quite long, but embedding ensures offline use.
  // Here is the minified version:
  !function(o){function t(o){this.mode=l.MODE_8BIT_BYTE,this.data=o}function e(o,t){this.typeNumber=o,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function r(o,t){this.totalCount=o,this.dataCount=t}function i(){this.buffer=[],this.length=0}function n(o){for(var t=0;t<o.length;t++)this.put(o.charCodeAt(t),8)}var l={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},u={L:1,M:0,Q:3,H:2};t.prototype={getLength:function(){return this.data.length},write:function(o){for(var t=0;t<this.data.length;t++)o.put(this.data.charCodeAt(t),8)}};i.prototype={getLengthInBits:function(){return this.length},put:function(o,t){for(var e=0;e<t;e++)this.putBit(1==(o>>>t-e-1&1))},putBit:function(o){var t=this.length>>3;this.buffer.length<=t&&this.buffer.push(0),o&&(this.buffer[t]|=128>>>this.length%8),this.length++}};e.prototype={addData:function(o){this.dataList.push(new t(o)),this.dataCache=null},isDark:function(o,t){if(0>o||this.moduleCount<=o||0>t||this.moduleCount<=t)throw new Error(o+","+t);return this.modules[o][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.typeNumber=4,this.moduleCount=21;for(var o=new Array(this.moduleCount),t=0;t<this.moduleCount;t++){o[t]=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)o[t][e]=null}this.modules=o,this._setupPositionProbePattern(0,0),this._setupPositionProbePattern(this.moduleCount-7,0),this._setupPositionProbePattern(0,this.moduleCount-7),this._setupTimingPattern();var r=this._createData();this._mapData(r)},_setupPositionProbePattern:function(o,t){for(var e=-1;7>=e;e++)if(!(o+e<=-1||this.moduleCount<=o+e))for(var r=-1;7>=r;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[o+e][t+r]=e>=0&&6>=e&&(0==r||6==r)||r>=0&&6>=r&&(0==e||6==e)||e>=2&&4>=e&&r>=2&&4>=r)},_setupTimingPattern:function(){for(var o=8;o<this.moduleCount-8;o++)null==this.modules[o][6]&&(this.modules[o][6]=o%2==0),null==this.modules[6][o]&&(this.modules[6][o]=o%2==0)},_mapData:function(o){for(var t=-1,e=this.moduleCount-1,r=this.moduleCount-1,i=0,n=!0;n;){for(var l=0;2>l;l++)null==this.modules[r][e-l]&&(this.modules[r][e-l]=i<o.length?1==(o[i]>>>7-i%8&1):!1,i++);if(r+=t,0>r||this.moduleCount<=r){r-=t,t=-t,e-=2,0>e?n=!1:r=this.moduleCount-1}}},_createData:function(){for(var t=new i,e=0;e<this.dataList.length;e++){var r=this.dataList[e];t.put(4,4),t.put(r.getLength(),8),r.write(t)}for(var n=t.buffer,l=152,u=0;n.length<l;)n.push(236),n.length<l&&n.push(17);return n}};o.QRCode=e,o.QRErrorCorrectLevel=u}(window);
  </script>

  <script>
    const profile = {
      name: "مصطفى هيثم",
      phone: "+201093988206",
      whatsapp: "201141561578",
      facebook: "https://www.facebook.com/share/1BRXR66Zg7/"
    };
    // Build vCard
    const vcf = [
      "BEGIN:VCARD","VERSION:3.0",`FN:${profile.name}`,`TEL;TYPE=CELL,VOICE:${profile.phone}`,
      `item1.URL:https://wa.me/${profile.whatsapp}`,
      `item2.URL:${profile.facebook}`,"END:VCARD"
    ].join("\\n");
    document.getElementById("saveBtn").href = URL.createObjectURL(new Blob([vcf],{type:"text/vcard"}));

    // Fixed QR target (replace USERNAME with your GitHub username)
const QR_TARGET = "https://مصطفى-username.github.io/contact-card/";
    const qr = new QRCode(4, QRCode.QRErrorCorrectLevel.H);
    qr.addData(QR_TARGET);
    qr.make();
    const count = qr.getModuleCount();
    const scale = 6;
    const canvas = document.createElement("canvas");
    canvas.width = canvas.height = count * scale;
    const ctx = canvas.getContext("2d");
    ctx.fillStyle = "#fff"; ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle = "#000";
    for (let r=0;r<count;r++){
      for (let c=0;c<count;c++){
        if(qr.isDark(r,c)){ ctx.fillRect(c*scale, r*scale, scale, scale); }
      }
    }
    document.getElementById("qrcode").appendChild(canvas);
  </script>
</body>
</html>
