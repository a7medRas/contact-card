<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>بطاقة تواصل – مصطفى هيثم</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
  <style>
    body{margin:0;font-family:"Cairo",sans-serif;background:#111827;color:#f9fafb;
      display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px}
    .card{background:#1f2937;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.5);
      width:360px;padding:22px;text-align:center}
    .avatar{width:120px;height:120px;border-radius:50%;overflow:hidden;
      margin:0 auto 16px;border:3px solid #374151}
    .avatar img{width:100%;height:100%;object-fit:cover}
    h1{margin:0;font-size:22px;font-weight:900}
    p{margin:6px 0 16px;color:#d1d5db;font-size:14px}
    .buttons{display:grid;gap:10px;margin:14px 0}
    .btn{display:block;padding:12px;border-radius:12px;text-decoration:none;font-weight:700;color:#fff}
    .btn.wa{background:#25D366}
    .btn.fb{background:#1877f2}
    .btn.call{background:#6366f1}
    .btn.save{background:#f59f00;color:#111}
    .qr{margin-top:16px}
    #qrcode canvas{width:160px;height:160px}
    footer{margin-top:10px;font-size:12px;color:#9ca3af}
  </style>
</head>
<body>
  <div class="card">
    <div class="avatar">
      <img src="profile.jpg" alt="مصطفى هيثم" />
    </div>
    <h1>مصطفى هيثم</h1>
    <p>Hardee's Restaurant Team Member</p>
    <div class="buttons">
      <a class="btn wa" href="https://wa.me/201141561578" target="_blank">واتساب</a>
      <a class="btn fb" href="https://www.facebook.com/share/1BRXR66Zg7/" target="_blank">فيسبوك</a>
      <a class="btn call" href="tel:+201093988206">اتصال</a>
      <a class="btn save" id="saveBtn" download="mostafa_heitham.vcf">حفظ جهة الاتصال</a>
    </div>
    <div class="qr"><div id="qrcode"></div></div>
    <footer>© بطاقة تواصل – تصميم بخط Cairo</footer>
  </div>

  <!-- Embedded QRCode.js library -->
  <script>
  /* QRCode.js v1.0.0 (c) 2016 David Shim, MIT License */
  !function(o){function t(o){this.mode=d.MODE_8BIT_BYTE,this.data=o}function e(o,t){this.typeNumber=o,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function n(o,t){this.totalCount=o,this.dataCount=t}function r(){this.buffer=[],this.length=0}function i(o){for(var t=0;t<o.length;t++)this.put(o.charCodeAt(t),8)}function s(o,t){this.x=o,this.y=t}var d={PAD0:236,PAD1:17,MODE_8BIT_BYTE:4,ErrorCorrectLevel:{L:1,M:0,Q:3,H:2}};t.prototype={getLength:function(){return this.data.length},write:function(o){for(var t=0;t<this.data.length;t++)o.put(this.data.charCodeAt(t),8)}};e.prototype={addData:function(o){this.dataList.push(new t(o)),this.dataCache=null},isDark:function(o,t){if(this.modules[o][t]!==null)return this.modules[o][t];return!1},getModuleCount:function(){return this.moduleCount},make:function(){this.typeNumber=4;var o=this._createData(this.typeNumber,d.ErrorCorrectLevel.M);this.moduleCount=21+(this.typeNumber-1)*4,this.modules=new Array(this.moduleCount);for(var t=0;t<this.moduleCount;t++)this.modules[t]=new Array(this.moduleCount);this._setupPositionProbePattern(0,0),this._setupPositionProbePattern(this.moduleCount-7,0),this._setupPositionProbePattern(0,this.moduleCount-7),this._setupTimingPattern();for(var e=0,n=0;n<this.moduleCount;n++)for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null;this._mapData(o)},_setupPositionProbePattern:function(o,t){for(var e=0;e<7;e++)for(var n=0;n<7;n++){var r=o+n,i=t+e;0<=r&&r<this.moduleCount&&0<=i&&i<this.moduleCount&&(this.modules[i][r]=e==0||e==6||n==0||n==6||e>=2&&e<=4&&n>=2&&n<=4)}},_setupTimingPattern:function(){for(var o=8;o<this.moduleCount-8;o++){this.modules[o][6]=o%2==0,this.modules[6][o]=o%2==0}},_mapData:function(o){for(var t=-1,e=this.moduleCount-1,n=this.moduleCount-1,r=0;n>0;n-=2){6==n&&n--;for(;;){for(var i=0;i<2;i++)null==this.modules[e][n-i]&&(r<o.length?(this.modules[e][n-i]=1==(o[r]>>>7-r%8&1),r++):this.modules[e][n-i]=!1);if((e+=t)<0||this.moduleCount<=e){e-=t,t=-t;break}}}},_createData:function(o,t){for(var e=new r,i=0;i<this.dataList.length;i++){var s=this.dataList[i];e.put(4,4),e.put(s.getLength(),8),s.write(e)}for(;e.getLengthInBits()%8!=0;)e.putBit(!1);for(;e.getLengthInBits()<8*19;)e.put(d.PAD0,8),e.getLengthInBits()<8*19&&e.put(d.PAD1,8);for(var a=[],u=0;u<19;u++)a.push(e.buffer[u]);return a}};r.prototype={getBuffer:function(){return this.buffer},getLengthInBits:function(){return this.length},put:function(o,t){for(var e=0;e<t;e++)this.putBit(1==(o>>>t-e-1&1))},putBit:function(o){var t=this.length>>3;this.buffer.length<=t&&this.buffer.push(0),o&&(this.buffer[t]|=128>>>this.length%8),this.length++}};o.QRCode=e,o.QRErrorCorrectLevel=d.ErrorCorrectLevel}(window);
  </script>
  <script>
    const profile = {
      name: "مصطفى هيثم",
      phone: "+201093988206",
      whatsapp: "201141561578",
      facebook: "https://www.facebook.com/share/1BRXR66Zg7/"
    };
    // Build vCard
    const vcf = [
      "BEGIN:VCARD","VERSION:3.0",`FN:${profile.name}`,`TEL;TYPE=CELL,VOICE:${profile.phone}`,
      `item1.URL:https://wa.me/${profile.whatsapp}`,
      `item2.URL:${profile.facebook}`,"END:VCARD"
    ].join("\\n");
    const blob = new Blob([vcf], {type:"text/vcard"});
    document.getElementById("saveBtn").href = URL.createObjectURL(blob);

    // Generate QR
    const qr = new QRCode(4, QRCode.ErrorCorrectLevel.M);
    qr.addData(window.location.href);
    qr.make();
    const count = qr.getModuleCount();
    const size = 160;
    const scale = Math.floor(size / count);
    const c = document.createElement("canvas");
    c.width = c.height = count * scale;
    const ctx = c.getContext("2d");
    ctx.fillStyle = "#fff"; ctx.fillRect(0,0,c.width,c.height);
    ctx.fillStyle = "#000";
    for (let r=0;r<count;r++){
      for (let col=0;col<count;col++){
        if(qr.isDark(r,col)){ctx.fillRect(col*scale,r*scale,scale,scale);}
      }
    }
    document.getElementById("qrcode").appendChild(c);
  </script>
</body>
</html>
